---
- summary: |
    Пользовательский сценарий
  requirement: |
    "Нет данных"
  prerequisites: |
    "Нет данных"
  test-data: |
    "Нет данных"
  steps: |
    - Открыть сайт "https://products-store-ru.hexlet.app/"
    - Нажать на селект "Language", выбрать язык "Russian"
    - Нажать на кнопку "Следующая"
    - Нажать на кнопку "Предыдущая"
    - Ввести в поле "Поиск" - "Часы"
    - Нажать на селект "Категория"
    - Выбрать категорию "мужские-часы"
    - Выбрать чекбокс "Rolex" и "Apple"
    - Поставить диапазон цены в "Цена" от 100 до 10000
    - Выбрать 2 товара и зайти на их страничку
    - Добавить товары в корзину нажав на кнопку "В корзину"
    - Нажать на кнопку "Корзина"
    - Нажать на кнопку у товара "Удалить"
    - Нажать на кнопку "Оформить заказ"
    - Заполнить заказ 
    - Нажать на "Оплатить"
  expected-result: |
    - (Все страницы открываются <= 3 секунд)
    - Сайт загружается без ошибок, каталог товаров отображается
    - Все текстовые элементы (меню, кнопки, сообщения, карточки товаров при наличии перевода) меняются на выбранный язык
    - Все страницы и переходы работают без перезагрузки
    - Переход на следующию страницу
    - Возврат на предыдущую страницу
    - Фильтры и категории отображаются корректно
    - Показываются товары, удовлетворяющие всем критериям
    - На карточках товара корректно отображается: название, цена (обычная) и цена со скидкой (если есть)
    - На странице товара корректно отображается и совподает с карточкой: название, цена (обычная) и цена со скидкой (если есть)
    - 2 товара добавлены в корзину
    - В корзине корректно отображаются название, цена (со скидкой и без), количество, итоговая сумма
    - Товар удален из корзины (1 штука), сумма пересчитана
    - Переданные данные корректны
    - Переход на страницу оплаты
    - Заказ подтверждён, отображено подтверждение, запрос успешно ушел на сервер
    - Нет критических ошибок в консоли

- summary: |
    Поиск товара по названию
  requirement: |
    Пользователь должен иметь возможность искать товары по ключевому слову или категории
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    Ввести в поле "Search" - "Apple"
  expected-result: |
    Показан только запрашиваемый товар

- summary: |
    Поиск товара с частичным совпадением
  requirement: |
    Пользователь должен иметь возможность искать товары по ключевому слову или категории
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    Ввести в поле "Search" - "rE"
  expected-result: |
    Показаны товары в названиях которых есть сочетание "re"

- summary: |
    Поиск товара без совпадений
  requirement: |
    Пользователь должен иметь возможность искать товары по ключевому слову или категории
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    Ввести в поле "Search" случайную строку без совпадений
  expected-result: |
    Отображается сообщение "Nothing found!"

- summary: |
    Сброс фильтра при смене категории
  requirement: |
    Пользователь должен иметь возможность искать товары по ключевому слову или категории
  prerequisites: |
    - Открыта страница каталога
    - Категория выбрана
  test-data: |
    "Нет данных"
  steps: |
    - Активировать несколько чекбоксов
    - Сменить категорию
  expected-result: |
    - Фильтр брендов не сбрасывается

- summary: |
    Поиск товара в наличии
  requirement: |
    Пользователь должен иметь возможность фильтровать товары
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    Активировать чекбокс "In Stock"
  expected-result: |
    Показаны товары только в наличии

- summary: |
    Буквы в поле "Price"
  requirement: |
    Пользователь должен иметь возможность фильтровать товары
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    В фильтре "Price" ввести буквы
  expected-result: |
    Ввод не принемается

# - summary: |
#     Комбинация фильтров
#   requirement: |
#     Пользователь должен иметь возможность фильтровать товары
#   prerequisites: |
#     Открыта страница каталога
#   test-data: |
#     "Нет данных"
#   steps: |
#     - Ввести в поле "Search" - "watch"
#     - Нажать на селект "Category"
#     - Выбрать категорию
#     - Выбрать бренд
#     - Задать диапазон цен
#   expected-result: |
#     Показываются товары, удовлетворяющие всем критериям

- summary: |
    Переход по навигации сохраняет фильтры/поиск
  requirement: |
    Сайт нужно разработать с учетом удобства использования и оптимизировать для скорости работы
  prerequisites: |
    Фильтр/поиск применен
  test-data: |
    "Нет данных"
  steps: |
    - Нажать на кнопку "Next"
    - Нажать на кнопку "Previous"
  expected-result: |
    - Страница списка обновляется переходя на другую страницу сохраняя фильтр/поиск
    - Страница списка обновляется возвращаясь назад сохраняя фильтр/поиск

- summary: |
    Отображение информации на карточке товара
  requirement: |
    Пользователь должен иметь возможность просматривать товары и просматривать подробную информацию о товаре
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    Посмотреть на товары
  expected-result: |
    На карточках товара корректно отображается: название, цена (обычная) и цена со скидкой (если есть) и рейтинг

- summary: |
    Отображение информации на страничке товара
  requirement: |
    Пользователь должен иметь возможность просматривать товары и просматривать подробную информацию о товаре
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    Выбрать в каталоге любой товар и нажать на него
  expected-result: |
    - Открывается страничка товара
    - На странице корректно отображается: название, цена (обычная) и цена со скидкой (если есть), рейтинг и описание

- summary: |
    Добавление товара в корзину с карточки товара
  requirement: |
    Пользователь должен иметь возможность добавлять товары в корзину и просматривать содержимое корзины
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    - Выбрать в каталоге любой товар
    - Нажать на кнопку на карточке "Add to cart"
  expected-result: |
    Товар добавлен в корзину

- summary: |
    Повторное добавление товара в корзину
  requirement: |
    Пользователь должен иметь возможность добавлять товары в корзину и просматривать содержимое корзины
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    - Нажать на карточку товара
    - Нажать на кнопку "Add to cart" 2 раза
  expected-result: |
    - Открывается страничка товара
    - Товар добавлен в корзину и количество уведичивается, а не дублируется карточка

- summary: |
    Оформление заказа с пустой корзиной
  requirement: |
    Пользователь должен иметь возможность добавлять товары в корзину и просматривать содержимое корзины
  prerequisites: |
    Открыта страница корзины
  test-data: |
    "Нет данных"
  steps: |
    - Корзина пуста
  expected-result: |
    - Кнопка заказа неактивна

- summary: |
    Удаление всех товаров из корзины
  requirement: |
    Пользователь должен иметь возможность добавлять товары в корзину и просматривать содержимое корзины
  prerequisites: |
    Открыта страница корзины
  test-data: |
    "Нет данных"
  steps: |
    Нажать на кнопку "Clear cart"
  expected-result: |
    - Все товары удалены из корзины
    - Сумма сбрасывается

- summary: |
    Продолжить покупки из корзины
  requirement: |
    Пользователь должен иметь возможность добавлять товары в корзину и просматривать содержимое корзины
  prerequisites: |
    Открыта страница корзины
  test-data: |
    "Нет данных"
  steps: |
    Нажать на кнопку "Continue shopping"
  expected-result: |
    Переход в каталог

- summary: |
    Корзина хранится в сессии и сохраняется при обновлении страницы
  requirement: |
    Товары в корзине должны сохраняться при обновлении страницы
  prerequisites: |
    Товар добавлен в корзину
  test-data: |
    "Нет данных"
  steps: |
    - Обновить страницу
    - Перейти в корзину
  expected-result: |
    Товар остался в корзине (Session storage)

- summary: |
    Навигация между страницами без полной перезагрузки(SPA)
  requirement: |
    Сайт должен быть SPA-приложением
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    - Нажать на карточку товара
    - Вернуться назад через кнопку браузера "Назад"
    - Нажать на кнопку "Cart"
    - Перейти обратно в каталог через кнопку "Continue shopping"
  expected-result: |
    - При переходах между страницами нет перезагрузки (Network происходит дозагрузка нужных элементов)
    - Контент каждой страницы обновляется динамически без мерцания
    - История браузера корректно работает (Назад/Вперёд возвращают правильные страницы)
    - URL меняется корректно (/product/1, /cart)

- summary: |
    Загрузка сайта без интернета
  requirement: |
    Сайт нужно разработать с учетом удобства использования и оптимизировать для скорости работы
  prerequisites: |
    Открыта страница каталога
  test-data: |
    "Нет данных"
  steps: |
    - Открыть DevTools, Network, выставить Offline
    - Обновить страничку
  expected-result: |
    - Отображается сообщение что нет соединения с интернетом

- summary: |
    Пользовательский сценарий при 3G интернете
  requirement: |
    "Нет данных"
  prerequisites: |
    "Нет данных"
  test-data: |
    "Нет данных"
  steps: |
    - Открыть сайт "https://products-store-ru.hexlet.app/"
    - Нажать на кнопку "Next"
    - Нажать на кнопку "Previous"
    - Ввести в поле "Search" - "watch"
    - Нажать на селект "Category"
    - Выбрать категорию "mens-watches"
    - Выбрать чекбокс "Rolex"
    - Поставить диапазон цены в "Price" от 100 до 10000
    - Выбрать 2 товара и зайти на их страничку
    - Добавить товары в корзину нажав на кнопку "Add to cart"
    - Нажать на кнопку "Cart"
    - Нажать на кнопку у товара "Delete"
    - Нажать на кнопку "Checkout"
    - Заполнить заказ 
    - Нажать на "Pay"
  expected-result: |
    - (Все страницы открываются <= 10 секунд)
    - Контент отображается постепенно(нет белого экрана)
    - Изображения подгружаются адаптивно (webp)
    - Сайт загружается без ошибок
    - Все страницы и переходы работают без перезагрузки
    - Переход на следующию страницу
    - Возврат на предыдущую страницу
    - Фильтры и категории отображаются корректно
    - Нет "зависших" кнопок или двойных кликов
    - Поиск и фильтрация выполняются, с задержкой <= 3 секунд
    - Показываются товары, удовлетворяющие всем критериям
    - На карточках товара корректно отображается: название, цена (обычная) и цена со скидкой (если есть)
    - Открывается страничка товара, без таймаута и бесконечной загрузки
    - 2 товара добавлены в корзину
    - Открывается корзина без ошибок
    - Товар удален из корзины (1 штука), сумма пересчитана
    - Переданные данные корректны
    - Переход на страницу оплаты без таймаута/зависания
    - Заказ подтверждён, отображено подтверждение, сайт не падает при долгом ответе сервера
    - Нет критических ошибок в консоли

- summary: |
    Отображение сайта на разных разрешениях
  requirement: |
    Сайт должен быть доступен на различных устройствах
  prerequisites: |
    "Нет данных"
  test-data: |
    "Нет данных"
  steps: |
    - Открыть сайт на экране (эмулятор/реал) - разной ширины: 430x932, 390x844,
    393x852, 360x800, 414x896, 412x915, 1024x768, 1280x800, 1920x1080, 2560x1440
    - Посетить страницы каталога, корзины, оплаты
  expected-result: |
    - Интерфейс адаптирован 
    - Элементы не перекрываются 
    - Фильтры доступны 

- summary: |
    Тач-удобство
  requirement: |
    Сайт должен быть доступен на различных устройствах
  prerequisites: |
    "Нет данных"
  test-data: |
    "Нет данных"
  steps: |
    - Открыть сайт на экране (эмулятор/реал) - разной ширины: 430x932, 390x844,
    393x852, 360x800, 414x896, 412x915, 1024x768, 1280x800, 1920x1080, 2560x1440
    - Проверить кликабельные зоны кнопок
  expected-result: |
    - Кнопки соответствуют рекомендуемым размерам
    - Кнопки хорошо реагируют на нажатия

- summary: |
    Трафик по HTTPS
  requirement: |
    Сайт должен быть безопасным и защищать данные пользователя
  prerequisites: |
    "Нет данных"
  test-data: |
    "Нет данных"
  steps: |
    Открыть сайт, проверить все запросы
  expected-result: |
    Все запросы идет по HTTPS

- summary: |
    Защита от XSS
  requirement: |
    Сайт должен быть безопасным и защищать данные пользователя
  prerequisites: |
    "Нет данных"
  test-data: |
    "Нет данных"
  steps: |
    Ввести во все поля скрипт <script>alert(1)</script>
  expected-result: |
    Нет исполнения скрипта

- summary: |
    Защита от SQL иньекций
  requirement: |
    Сайт должен быть безопасным и защищать данные пользователя
  prerequisites: |
    "Нет данных"
  test-data: |
    "Нет данных"
  steps: |
    Ввести во все поля "DROP TABLE users;"
  expected-result: |
    Запрос не выполняется

- summary: |
    Безопасное хранение сессии
  requirement: |
    Сайт должен быть безопасным и защищать данные пользователя
  prerequisites: |
    "Нет данных"
  test-data: |
    "Нет данных"
  steps: |
    Проверить идентификаторы сессий и аткибуты
  expected-result: |
    - Идентификаторы сессий не содержат чувствительных данных
    - Cookie имеют флаги Secure и HttpOnly

- summary: |
    Высокая нагрузка: просмотр каталога
  requirement: |
    Важно, чтобы сайт мог обрабатывать большое количество трафика
  prerequisites: |
    Открыта программа "JMeter"
  test-data: |
    "Нет данных"
  steps: |
    Отправить 500 GET-запросов на сайт за 60 секунд
  expected-result: |
    - Среднее время ответа <= 3 сек, ошибок 5xx <= 1%

- summary: |
    Высокая нагрузка: добавление в корзину
  requirement: |
    Важно, чтобы сайт мог обрабатывать большое количество трафика
  prerequisites: |
    Открыта программа "JMeter"
  test-data: |
    "Нет данных"
  steps: |
    100 пользователей одновременно отправляют POST api/cart
  expected-result: |
    - Среднее время ответа <= 3 сек, ошибок 4xx/5xx <= 1%

